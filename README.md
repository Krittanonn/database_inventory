# ฐานข้อมูลระบบจัดการสินค้าและคลังสินค้า

เอกสารอธิบายโครงสร้างฐานข้อมูลของระบบจัดการสินค้า การรับเข้า-จ่ายออกคลังสินค้า การสต๊อก และการจัดการคำสั่งซื้อจากผู้ขาย

---

## 1. ตารางหมวดหมู่สินค้า (`Product_Categories`)

* ใช้เก็บข้อมูลหมวดหมู่ของสินค้า เช่น อุปกรณ์อิเล็กทรอนิกส์ เสื้อผ้า ฯลฯ
* รองรับหมวดหมู่ย่อย (Self-referencing ด้วย `parent_category_id`)
* ความสัมพันธ์:

  * เชื่อมกับ `Products` เพื่อระบุว่าสินค้าแต่ละตัวอยู่ในหมวดไหน

---

## 2. ตารางยี่ห้อสินค้า (`Brands`)

* เก็บข้อมูลยี่ห้อของสินค้า เช่น Apple, Samsung, Nike ฯลฯ
* ความสัมพันธ์:

  * เชื่อมกับ `Products` เพื่อระบุว่าสินค้าแต่ละตัวเป็นของยี่ห้อใด

---

## 3. ตารางหน่วยนับ (`Units`)

* ใช้เก็บหน่วยของสินค้า เช่น ชิ้น, กล่อง, ลัง
* ความสัมพันธ์:

  * เชื่อมกับ `Products` เพื่อระบุว่าสินค้าหน่วยเป็นอะไร

---

## 4. ตารางผู้จัดจำหน่าย (`Suppliers`)

* เก็บข้อมูลผู้จัดจำหน่าย เช่น ชื่อ ที่อยู่ เบอร์โทร อีเมล
* ความสัมพันธ์:

  * เชื่อมกับ `Purchase_Orders` และ `Inventory_Lots` เพื่อรู้ว่าสินค้ามาจากซัพพลายเออร์รายใด

---

## 5. ตารางคลังสินค้า (`Warehouses`)

* ใช้เก็บข้อมูลคลังสินค้าหลายแห่ง เช่น ชื่อคลัง ที่ตั้ง ผู้ติดต่อ
* ความสัมพันธ์:

  * เชื่อมกับ `Inventory`, `PO_Items`, `Stock_Movements`, `Stocktaking`

---

## 6. ตารางคุณลักษณะสินค้า (`Product_Attributes`)

* เก็บชื่อคุณสมบัติ เช่น สี ขนาด ความจุ
* ใช้คู่กับตาราง Value เพื่อทำระบบ Variant

---

## 7. ตารางค่าคุณลักษณะ (`Product_Attribute_Values`)

* เก็บค่าแต่ละคุณลักษณะ เช่น แดง, 64GB, XL
* ความสัมพันธ์:

  * ใช้ร่วมกับ `Product_Variant_Attributes` เพื่อผูกกับ Variant

---

## 8. ตารางสินค้า (`Products`)

* เก็บข้อมูลสินค้า เช่น ชื่อ, รหัสสินค้า, ราคา, หน่วยนับ, ยี่ห้อ, หมวดหมู่
* ความสัมพันธ์:

  * เชื่อมกับ: `Brands`, `Units`, `Product_Categories`
  * มีความสัมพันธ์กับ: `Product_Variants`, `Inventory`, `Product_Images`, `Purchase_Orders`, `PO_Items`

---

## 9. ตารางสินค้าแบบแปรผัน (`Product_Variants`)

* สำหรับสินค้าที่มีหลายรุ่น เช่น เสื้อสีแดง/น้ำเงิน ไซส์ S/M/L
* ความสัมพันธ์:

  * เชื่อมกับ `Products`
  * ใช้ร่วมกับ `Product_Variant_Attributes`

---

## 10. ตารางคุณลักษณะแปรผัน (`Product_Variant_Attributes`)

* ใช้เชื่อมคุณลักษณะและค่ากับสินค้า Variant เช่น เสื้อแดง ไซส์ M
* ความสัมพันธ์:

  * เชื่อมกับ `Product_Variants`, `Product_Attributes`, `Product_Attribute_Values`

---

## 11. ตารางรูปสินค้า (`Product_Images`)

* เก็บ URL รูปสินค้า แยกได้ระหว่างรูปสินค้าหลัก และ Variant
* ความสัมพันธ์:

  * เชื่อมกับ `Products` และ `Product_Variants`

---

## 12. ตารางบาร์โค้ด (`Product_Barcodes`)

* เก็บบาร์โค้ดที่ใช้กับสินค้า/Variant
* ความสัมพันธ์:

  * เชื่อมกับ `Products` และ `Product_Variants`

---

## 13. ตารางคลังสินค้า (`Inventory`)

* เก็บจำนวนคงเหลือของสินค้าในแต่ละคลัง
* ความสัมพันธ์:

  * เชื่อมกับ `Warehouses`, `Products`, `Product_Variants`
  * เชื่อมกับ `Inventory_Lots`, `Inventory_Locations`, `Stock_Movements`, `Inventory_Audit_Log`

---

## 14. ตารางคำสั่งซื้อ (`Purchase_Orders`)

* บันทึกคำสั่งซื้อจากผู้จัดจำหน่าย
* ความสัมพันธ์:

  * เชื่อมกับ `Suppliers`
  * เชื่อมกับ `PO_Items`

---

## 15. รายการสินค้าในใบสั่งซื้อ (`PO_Items`)

* แสดงสินค้าที่อยู่ในแต่ละใบสั่งซื้อ พร้อมจำนวนและราคา
* ความสัมพันธ์:

  * เชื่อมกับ `Purchase_Orders`, `Products`, `Product_Variants`, `Warehouses`

---

## 16. ล็อตสินค้า (`Inventory_Lots`)

* ใช้ติดตามสินค้าแบบล็อต เช่น สินค้าที่มีวันผลิต-วันหมดอายุ
* ความสัมพันธ์:

  * เชื่อมกับ `Inventory`, `Suppliers`, `PO_Items`

---

## 17. ตำแหน่งในคลัง (`Warehouse_Locations`)

* ใช้ระบุพื้นที่ภายในคลัง เช่น ชั้นวาง, แถว, โซน
* ความสัมพันธ์:

  * เชื่อมกับ `Warehouses`
  * รองรับซ้อนตำแหน่ง (parent\_location\_id)

---

## 18. สินค้าในตำแหน่ง (`Inventory_Locations`)

* ใช้ระบุว่าสินค้าอยู่ตำแหน่งไหนในคลัง
* ความสัมพันธ์:

  * เชื่อมกับ `Inventory`, `Inventory_Lots`, `Warehouse_Locations`

---

## 19. การเคลื่อนไหวสินค้า (`Stock_Movements`)

* บันทึกการเคลื่อนไหว เช่น รับเข้า-จ่ายออก, ปรับปรุงสต๊อก
* ความสัมพันธ์:

  * เชื่อมกับ `Products`, `Product_Variants`, `Warehouses`
  * ใช้กับ `Stock_Movements_Detail`

---

## 20. รายละเอียดการเคลื่อนไหว (`Stock_Movements_Detail`)

* ระบุรายละเอียดของแต่ละ Movement เช่น ล็อตไหน ถูกขนกี่ชิ้น
* ความสัมพันธ์:

  * เชื่อมกับ `Stock_Movements`, `Inventory_Lots`

---

## 21. การตรวจนับสินค้า (`Stocktaking`)

* บันทึกการตรวจนับสินค้าในคลังเป็นงวด ๆ
* ความสัมพันธ์:

  * เชื่อมกับ `Warehouses`, `Stocktake_Items`

---

## 22. รายการตรวจนับ (`Stocktake_Items`)

* รายละเอียดสินค้าในการตรวจนับ: คาดว่ามีเท่าไร vs มีจริงเท่าไร
* ความสัมพันธ์:

  * เชื่อมกับ `Stocktaking`, `Products`, `Product_Variants`

---

## 23. บันทึกการเปลี่ยนแปลง (`Inventory_Audit_Log`)

* ใช้เก็บ Log การเปลี่ยนแปลงข้อมูลคลัง เช่น การปรับจำนวน
* เก็บ JSON ข้อมูลก่อนและหลัง, timestamp, user, IP
* ความสัมพันธ์:

  * เชื่อมกับ `Inventory`, `Stock_Movements`

---

ฐานข้อมูลนี้ออกแบบมาเพื่อรองรับระบบจัดการสินค้าและคลังสินค้า โดยมีการแยกข้อมูลตามหน้าที่อย่างชัดเจน ทั้งด้านสินค้า การรับเข้า การจัดเก็บ การตรวจนับ การเคลื่อนไหว และการบันทึกประวัติ รวมถึงระบบตรวจสอบย้อนหลังเพื่อความโปร่งใสและความปลอดภัยของข้อมูล

และคาดว่า โครงสร้างนี้สามารถนำไปใช้กับธุรกิจที่มีคลังสินค้า ร้านค้าหลายสาขา หรือระบบ ERP ได้ เช่น เชื่อมต่อกับระบบขายหน้าร้าน (POS), ระบบบัญชี
